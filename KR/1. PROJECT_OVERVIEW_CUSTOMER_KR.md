# 이커머스 플랫폼 진행 현황 및 주요 기능 안내

---

## 프로젝트 개요

이커머스 플랫폼은 B2B(유통사)와 B2C(일반 고객) 모두를 위한 새로운 쇼핑 웹사이트입니다. 각 유통사(디스트리뷰터)는 자신의 브랜드와 도메인으로 독립적인 쇼핑몰을 운영할 수 있고, 일반 고객도 편리하게 제품을 구매할 수 있습니다.

---

## 주요 기능

### 1. 고객 유형 자동 인식

- 사용자가 로그인하면 이메일 도메인으로 유통사/일반 고객을 자동으로 구분합니다.
- 유통사 고객은 맞춤 가격과 할인, 전용 서비스가 제공됩니다.
- 일반 고객은 기본 가격으로 구매할 수 있습니다.

### 2. 맞춤 가격 및 할인

- 유통사별로 각기 다른 가격과 할인율이 적용됩니다.
- 대량 구매 시 추가 할인도 가능합니다.
- 모든 가격 정책은 관리자가 직접 설정하고 관리합니다.

#### 관리자 B2B 가격 UI (업데이트)

- 카테고리 필터(하위 카테고리 포함 옵션)
- 안정적이고 반응성 좋은 검색/정렬 툴바
- 대규모 카탈로그에서도 빠르게 동작하는 클라이언트 페이지네이션
- 명확한 로딩 인디케이터: 사이드바 초기 스피너 및 유통사 변경 시 패널 오버레이
- 계층 인지 가격 규칙: 하위 카테고리 할인은 상위보다 우선, 단일 최적 할인만 적용
- API/스키마 정렬: `categoryId`(+`distributorId` 복합키) 기준으로, 레거시 이름 기반 할인 제거
- 자세한 문서는 메인 저장소에서 확인: ecommerce-store/docs/ADMIN_B2B_PRICING.md

### 3. 주문 및 견적 시스템

- 영업사원은 상품 상세 페이지에 있는 입력 UI를 통해 빠르게 견적(Quote)을 요청할 수 있습니다.
- 공식 주문(PO)은 장바구니에서 바로 생성되며, 주문 내역과 상태를 어드민에서 확인할 수 있습니다.
- 주문 후 자동으로 이메일 안내가 발송됩니다.

### 4. 결제 방식

- 일반 고객은 신용카드(Stripe)로 즉시 결제합니다.
- 유통사 고객은 30일 후 결제(외상 결제) 방식도 지원합니다.
- 브라우저/기기 환경이 지원하는 경우, Stripe를 통해 **Google Pay / Apple Pay(지갑 결제)** 도 노출될 수 있습니다(HTTPS + Stripe 도메인 등록 필요).

### 4.1 상품 탐색/카테고리 네비게이션(스토어프론트)

- 스토어프론트 상품 목록(`/products`)에서 카테고리 트리 기반 탐색과 URL 동기화 필터(북마크/공유 가능)를 지원합니다.
- 헤더 검색은 전체 화면 검색 모달로 실시간 추천/결과를 제공합니다.

### 5. White-label(브랜드별 쇼핑몰)

- 각 유통사는 자신의 도메인과 브랜드(로고, 색상)로 쇼핑몰을 운영할 수 있습니다.
- 같은 제품이라도 유통사마다 가격, 할인, 디자인이 다르게 적용됩니다.
- 예시: chromet.com/shop → Chromet 브랜드, pizazzstore.com → Pizazz 브랜드

### 6. 어드민

- 관리자는 어드민에서 주문, 매출, 결제, 제품, 설정 등을 쉽게 관리할 수 있습니다.
- 모든 주문과 견적, 결제 내역을 한눈에 확인할 수 있습니다.
- **홈 랜딩페이지 레이아웃 편집**: `/admin/home`에서 홈 화면(히어로 타일 + 추천 섹션) 레이아웃을 설정할 수 있습니다.
- **상품 운영 기능(관리자)**도 포함됩니다:
  - **제품 상태/노출 제어**: `draft / active / archived` (스토어프론트는 active만 노출)
  - **재고 조정 로그**: 재고 절대값 직접 수정 대신 증감(+/-) 조정 + 사유 + 이력(Inventory History)
  - **프로모션(세일) 스케줄**: 한 상품에 여러 Scheduled Sale 등록(기간/우선순위/활성), 현재 시점에 적용될 세일은 규칙으로 자동 선택

### 6.1 운영 설정(Settings)

- 최소 주문금액, 기본 배송비, 무료배송 기준, 저재고 임계치 같은 운영 값을 어드민에서 바로 변경할 수 있습니다.
- 운영/PoC 단계에서 PO/Quote/테스트 이메일을 수신할 관리자 이메일(`ADMIN_EMAIL`)도 설정할 수 있습니다.
- (확장) 이메일 송신자(From 이름/도메인)와 문서(PDF)용 회사 주소/지원 이메일도 Settings에서 관리하도록 확장 가능합니다.

### 6.2 재고 운영(저재고 리포트 + CSV 대량 업데이트)

- 저재고 제품을 임계치 기준으로 빠르게 조회하고 CSV로 내보낼 수 있습니다.
- `sku,stock,reason,note` 형식의 CSV 업로드로 재고를 일괄 “절대값” 업데이트할 수 있고, 변경분은 재고 조정 로그로 남습니다.

### 6.3 주문 CSV Export + 배송/송장 정보 업데이트

- 주문 데이터를 CSV로 내보내 운영/정산/물류 워크플로우에 활용할 수 있습니다(아이템 단위 1행).
- 주문에 택배사/송장번호를 기록하고, 발송/배송완료 상태 전환 시 타임스탬프를 저장할 수 있습니다.
- (대량) CSV 업로드로 택배사/송장번호/상태를 일괄 업데이트하여 물류 운영을 빠르게 처리할 수 있습니다.

### 7. 고객지원(Customer Support) - 문의/티켓

- 고객은 주문 상세 화면에서 바로 문의를 남기고, 문의 이력(티켓)을 한 곳에서 확인할 수 있습니다.
- 고객지원(CS) 담당자는 어드민의 티켓 큐에서 문의를 관리하고, 대화(스레드) 형태로 답변을 남길 수 있습니다.
- 티켓은 주문과 연결될 수 있어, 주문 정보(요약)를 같은 화면에서 함께 확인하며 대응할 수 있습니다.

### 8. 자동 이메일 안내

- 주문, 견적, 배송 등 주요 이벤트마다 자동으로 이메일이 발송됩니다.
- 결제 예정일 알림 등도 자동 안내됩니다.

### 9. 보안 및 권한 관리

- 모든 사용자는 안전하게 로그인하며, 역할에 따라 접근 권한이 다르게 설정됩니다.
- 유통사 직원, 관리자, 일반 고객 등 각자 필요한 기능만 볼 수 있습니다.

---

## 진행 현황 (2026년 1월 기준)

- **기본 로그인/회원 관리**: 완료
- **제품 등록 및 가격 관리**: 완료 (상태/노출 제어 포함)
- **재고 관리(증감 조정 + 이력)**: 완료
- **B2C 프로모션 스케줄(여러 세일/기간/우선순위)**: 완료
- **유통사별 맞춤 가격/할인**: 완료
- **장바구니 및 주문 생성**: 완료
- **견적 요청 및 이메일 안내**: 완료
- **Stripe 신용카드 결제**: 완료
- **고객지원(문의/티켓) + CS 답변 스레드 + 어드민 큐**: 완료
- **운영 설정(Settings) + 저재고 리포트/CSV + 재고 대량 업데이트(CSV)**: 완료
- **주문 CSV Export + 배송/송장 정보(택배사/송장번호/발송·배송완료 일시)**: 완료
- **30일 외상 결제(유통사용)**: 부분 구현(테스트 중)
  - (관리자 운영) PO 주문 `paid` 처리 시 `invoiceNumber`/`paidAt` 자동 기록
  - (관리자 운영) 결제완료 이메일 발송 + Receipt PDF 첨부
- **White-label(브랜드별 쇼핑몰)**: 부분 구현, 브랜드/도메인별 분기 및 관리 UI 완료, 디자인 자동 적용 및 유통사별 독립 관리자 기능 추가 예정
- **자동 이메일 시스템**: PO(구매주문) 및 Quote(견적) 등 **B2B 관련 이벤트에 대한 자동 발송**과 B2C(일반 고객)의 주문/배송 이메일 모두 개발 완료되었습니다. 템플릿 표준화 및 추가 기능 개발도 진행 중
- **어드민**: 주문/매출/제품 관리 기능 구현, 추가 통계 및 관리 기능 개발 예정

---

## 앞으로의 계획

- 브랜드/디자인 자동 적용 기능 강화
- 견적 주문 프로세스 보완
- 대시보드 통계 및 관리 기능 확장
- 운영/보안/사용자 경험(UX) 개선
- (외상 결제 운영 고도화) **부분 결제 / 취소·환불 / 크레딧(정산 조정) / Cron 기반 결제 리마인더 이메일**
- 상품 목록 UX 고도화: 무한 스크롤 또는 페이지네이션
- 상품 분류 고도화: 다중 카테고리(상품↔카테고리 다대다)
- 상품 마스터 고도화: Variant(옵션/품목) 기반 SKU/재고/가격 확장
- 유통사별 독립 관리자 기능(자체 상품/주문/회원/브랜딩 관리) 추가

---

## 자주 묻는 질문

**Q. 우리 회사만의 브랜드로 쇼핑몰을 운영할 수 있나요?**

- 네, 각 유통사는 자신의 도메인과 브랜드(로고, 색상)로 독립적인 쇼핑몰을 운영할 수 있습니다.

**Q. 대량 구매 할인이나 맞춤 가격이 적용되나요?**

- 네, 유통사별로 맞춤 가격과 대량 구매 할인 정책을 직접 설정할 수 있습니다.

**Q. 주문/견적/배송 안내는 어떻게 받나요?**

- 모든 주요 이벤트마다 자동으로 이메일 안내가 발송됩니다.

**Q. 결제 방식은 어떻게 되나요?**

- 일반 고객은 신용카드 결제, 유통사 고객은 30일 외상 결제 등 다양한 방식이 지원됩니다.

---

문의사항이 있으시면 언제든 연락해 주세요!
